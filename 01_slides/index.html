<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Usługi i platformy deweloperskie dla aplikacji w Chmurze</title>

		<!-- bootstrap -->
		<link rel="stylesheet" href="ext/bootstrap-5.1.3-dist/css/bootstrap.css">
		<!-- -->

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">


		<!-- remove annoying shadow around images -->
		<style>
			.reveal section img {
				background-color:white;
				border:0;
				box-shadow: 0 0 0 0;
			}
		</style>
		<!-- -->
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h3>U<span style="text-transform: lowercase;">sługi i platformy deweloperskie dla aplikacji w Chmurze</span></h3>

					<img src="img/what-are-cloud-in-cloud-computing-is-made-of-dad.jpeg" class="center-block" style="background-color:white;border:0;width: 60%"/>
					<!-- h5>+ how to prepare your service</h5 -->
					<br />

					<h6><small>W<span style="text-transform: lowercase;">ojciech</span> B<span style="text-transform: lowercase;">arczyński</span> <br />
							<span style="text-transform: lowercase;">wojciech.barczynski@wsb.wroclaw.pl</span></small>
				</section>

				<section data-markdown>
					<script type="text/template">
### W<span style="text-transform: lowercase;">hoami</span>

Wojciech Barczyński:

- System Engineer
- Lead @ Codility
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### C<span style="text-transform: lowercase;">el</span>

- Azure
- Narzędzia
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### Z<span style="text-transform: lowercase;">alicznie</span>

- Projekt - 2x Azure/AWS/GCP service - github/gitlab
- Egzamin
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### W<span style="text-transform: lowercase;">ykład &amp; ćwiczenia</span>

- Materiały: <a href="https://github.com/wojciech11/cloud_dev_tools_and_platforms">github</a>
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### Ś<span style="text-transform: lowercase;">rodowisko</span>

- Ubuntu 20.04 albo inna dystrybucja / *nix - MacOS
- Dual-boot?
- Lang: Python, Golang, dotnet core, ...
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### Ć<span style="text-transform: lowercase;">wiczenia</span>

- Problem
- Mierzymy się z zadaniem samemu - timebox
- Pytamy / prosimy o pomoc.
- Zrobiłam / Zrobiłem - warto pokazać
- Kopiuj&Wklej zakazane (chyba, że wykładowca powie inaczej)
					</script>
				</section>

				<section>
					<h3>D<span style="text-transform: lowercase;">laczego chmura?</span></h3>
					<ul>
						<li>Elastyczność</li>
						<li>Niższe koszty</li>
						<li>Wszystko API, łatwe do automatyzacji</li>
						<li>Pay As You Go</li>
						<li>Gwałtowna demokratyzacja technologii</lo>
					</ul>
				</section>

				<section>
					<h3>D<span style="text-transform: lowercase;">laczego chmura?</span></h3>
					<ul>
						<li>Potężne narzędzie do rozwiązywania problemów</li>
						<li>Cloud-first, Mobile-first</li>
					</ul>
				</section>

				<section>
					<h3>E<span style="text-transform: lowercase;">wolucja 1</span></h3>
					<ul>
						<li>Własny hardware</li>
					</ul>
				</section>

				<section>
					<h3>E<span style="text-transform: lowercase;">wolucja 1</span></h3>
					<p>Trendy:</p>
					<ul>
						<li>Rozwój CPU -&gt; CPU idle</li>
						<li>Dużo sprzętu -&gt; szybko się starzeje</li>
					</ul>
				</section>

				<section>
					<h3>E<span style="text-transform: lowercase;">wolucja 2</span></h3>
					<ul>
						<li>Wirtualizacja na niezawodnym i dedykowanym sprzęcie</li>
						<li>Konsolidacja</li>
					</ul>
				</section>

				<section>
					<h3>E<span style="text-transform: lowercase;">wolucja 2</span></h3>
					<ul>
						<li>Dużo sprzętu -&gt; szybko się starzeje</li>
						<li>Mała elastyczność</li>
						<li>Trudne do zautomatyzowania</li>
						<li>Amazon i Black Friday</li>
						<li>Google buduje na zwykłym sprzęcie</li>
					</ul>
				</section>

				<section>
					<h3>E<span style="text-transform: lowercase;">wolucja 3</span></h3>
					<ul>
						<li>Masowa wirtualizacja na zwykłym*/zawodnym sprzęcie</li>
					</ul>
					<small>* - tak się zaczęło...</small>
				</section>

				<section data-markdown>
					<script type="text/template">
### C<span style="text-transform: lowercase;">attle vs </span>P<span style="text-transform: lowercase;">ets</span>

<img src="img/Rubber_Duck_Sea.jpg" width="60%"/>
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### C<span style="text-transform: lowercase;">attle vs </span>P<span style="text-transform: lowercase;">ets</span>

<img src="img/Rubber_Duck_Sea.jpg" width="60%"/>

<p>D001, D002, D003, D004, Disposabled</p>
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### C<span style="text-transform: lowercase;">attle vs </span>P<span style="text-transform: lowercase;">ets</span>

- Wirtualne Maszyny może paść
- Wirtualna Maszyna może być przemigrowana
- Chatty neigbours...
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
<img src="img/managed_stack_on_premise.svg" />
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
<img src="img/managed_stack_iaas.svg" />
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
<img src="img/managed_stack_paas.svg" />
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
<img src="img/managed_stack.svg"/>
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
<img src="img/piramida_onp_saas.svg"/>
					</script>
				</section>

					<section data-markdown>
						<script type="text/template">
### MTTR <span style="text-transform: lowercase;">vs</span> MTTF

- Chmura: MTTR
- Wcześniej: MTTF

<p><small><a href="https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing">Fallacies of distributed computing</a></small></p>
						</script>
					</section>
					<!-- https://www.atlassian.com/incident-management/kpis/common-metrics -->

				<section>
						<h3>J<span style="text-transform: lowercase;">ak wybrać?</span></h3>
						<ul>
							<li>100 serwisów</li>
							<li>K8S? Serverless? EC2 + xyz</li>
						</ul>
				</section>


				<section>
						<h3>J<span style="text-transform: lowercase;">ak wybrać?</span></h3>

						<img src="https://islodycze.pl/media/catalog/product/cache/1/image/85e4522595efc69f496374d01ef2bf13/s/o/solidarno_praliny_almondo_w_kartonie_2_5kg_islodycze.jpg" width="50%"/>
				</section>

				<section>
					<h3>H<span style="text-transform: lowercase;">igh performance teams</span></h3>
					<div class="container">
						<div class="row">
							<div class='col-md-6'>
								<p>(Tech) metrics:</p>
								<ul>
									<li>Lead Time</li>
									<li>Deployment frequency</li>
									<li>Mean time to Recovery</li>
									<li>Change Fail Percent</li>
								</ul>
							</div>
							<div class='col-md-6'>
								<img width="100%" style="object-fit: fill;" src="img/laptop_book_accelarate.png" />
							</div>
						</div>
					</div>
				</section>

				<section>
					<h3>C<span style="text-transform: lowercase;">hoosing tech</span></h3>
					<div class="container">
						<div class="row">
							<div class='col-md-6'>
								<p>Other factors:</p>
								<ul>
									<li>New tech for people to feel that they learn sth new</li>
									<li>What the tech background is</li>
								</ul>
							</div>
							<div class='col-md-6'>
								<img width="100%" style="object-fit: fill;" src="img/laptop_book_accelarate.png" />
							</div>
						</div>
					</div>
				</section>

				<section data-markdown>
					<script type="text/template">
### B<span style="text-transform: lowercase;">uy &gt; build</span>

Kandydaci:

- Wysokie TCO, nie jest to częścią naszego produktu
- Skomplikowany i złożony problem np., bazy danych
- Narzędzia
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### O<span style="text-transform: lowercase;">czekiwania wobec dev</span>

- Samo programowanie nie wystarcza!
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### O<span style="text-transform: lowercase;">czekiwania wobec dev</span>

Świadomość operacyjnej strony oprogramowania:

- monitoring - [RED](https://www.infoworld.com/article/3638693/the-red-method-a-new-strategy-for-monitoring-microservices.html), [4 Golden Signals](https://sre.google/sre-book/monitoring-distributed-systems/#xref_monitoring_golden-signals), [USE](https://www.brendangregg.com/usemethod.html)
- logging - structured<br /> np., [Python](https://www.structlog.org/en/stable/), [Golang](https://github.com/uber-go/zap), [dotnet core](https://serilog.net/), java
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### O<span style="text-transform: lowercase;">czekiwania wobec dev</span>

Świadomość operacyjnej strony oprogramowania:

- tracing
- probes
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### O<span style="text-transform: lowercase;">czekiwania wobec dev</span>

<img src="img/observability/observability_capex_vs_opex_from_golang_prod_blog.png" width="80%" />

<small><a href="https://peter.bourgon.org/go-for-industrial-programming/">Go for Industrial Programming by Peter Bourgon</a></small>
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### O<span style="text-transform: lowercase;">czekiwania wobec dev</span>

Warto obejrzeć:

[Engineering You • Martin Thompson](https://www.youtube.com/watch?v=S4LzzuMTqjs)

					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### O<span style="text-transform: lowercase;">czekiwania wobec dev</span>

Świadomość operacyjnej strony oprogramowania:

- you build it, you run it
- devs, ops na OnCall
					</script>
			</section>

				<section data-markdown>
					<script type="text/template">
### R<span style="text-transform: lowercase;">etry and timeouts</span>

- timeouts
- Retries
- Circute breaker

```python
requests.get('https://github.com', timeout=0.001)
```
					</script>
				</section>
				<!-- https://github.com/wojciech11/se_http_api_testing_quickstart -->
				<!-- https://ably.com/blog/8-fallacies-of-distributed-computing -->
				<!-- https://martinfowler.com/bliki/CircuitBreaker.html -->
				<!-- https://blog.codecentric.de/en/2019/06/resilience-design-patterns-retry-fallback-timeout-circuit-breaker/ -->

				<section data-background="img/eff_dev_books.png" data-background-repeat="" data-background-size="100%" data-background-color="white">
				</section>

				<section data-markdown>
					<script type="text/template">

<img src="https://images-na.ssl-images-amazon.com/images/I/51P4cUtnqUL.jpg" width="30%"/>

<p><span>Practice of Cloud System Administration, The: DevOps and SRE Practices for Web Services, Volume 2</span></p>
					</script>
				</section>

				<!--
				12factor apps
				-->
				<section data-markdown>
					<script type="text/template">
### <span style="text-transform: lowercase;">12factor apps</span>

- Good to know what [12factorapp](https://12factor.net) is.
- Not new, might look obvious.
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### <span style="text-transform: lowercase;">12factor apps</span>

Few that are very relevant for Kubernetes:

1. III. [Config](https://12factor.net/config) - environment variable, injected by environment
2. VIII. [Concurrency by process](https://12factor.net/concurrency)
3. IX. [Disposability](https://12factor.net/disposability) (MTTR vs MTTF)
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### <span style="text-transform: lowercase;">12factor apps</span>

4. X. [Dev/Prod parity](https://12factor.net/dev-prod-parity) including time, tooling, and backing services
5. XI. [Logs](https://12factor.net/logs) - push your logs to stdout and let log routers to take care of them
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
# P<span style="text-transform: lowercase;">raca z chmurą</span>
					</script>
				</section>
				<!-- https://github.com/wojciech12/talk_bitconf_best_practices_introducing_k8s_and_CN/blob/master/slides.pdf -->

				<section data-markdown>
					<script type="text/template">
### A<span style="text-transform: lowercase;">utomate everything?</span>

<img src="https://memegenerator.net/img/instances/51075200.jpg" width="40%"/>

<p><small><a href="https://github.com/wojciech12/talk_bitconf_best_practices_introducing_k8s_and_CN/blob/master/slides.pdf">best practices</a><small></p>
					</script>
				</section>
				<!--
				The purpose of a good architecture is to defer decisions, delay decisions.
				The job of an architect is not to make decisions, the job of an architect
				is to build a structure that allows decisions to be delayed as long as possible.
				Why? Because when you delay a decision, you have more information
				when it comes time to make it.

				— “Clean Architecture” Robert C. Martin
				-->

				<section data-markdown>
					<script type="text/template">
### A<span style="text-transform: lowercase;">utomate everything?</span>

- A journey

					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### A<span style="text-transform: lowercase;">utomate everything?</span>

Kroki:

1. Skrypty/README
2. Infrastructure-as-a-code w iteracjach
3. Unikać rzeczy utworzonych z ręki bez śladu w naszych git (doc, kod)
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### A<span style="text-transform: lowercase;">utomate everything?</span>

Kroki:

4. Dobrze mieć z tyły głowy: x2, x5
5. Rozdzielić środowiska dev, staging, prod na osobne konta wcześniej niż później
					</script>
				</section>

				<section data-markdown>
						<script type="text/template">
### T<span style="text-transform: lowercase;">echnologie</span>

1. Terraform
2. Terragrunt
3. Ansible / Saltstack
4. AWS CDF?
5. [Pulumi](https://www.thoughtworks.com/radar/platforms/pulumi) jest ciekawym projektem
						</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### C<span style="text-transform: lowercase;">ontinuous deployment</span>

- CI/CD zaczyna się na komputerze programisty
- Komponenty powinny być uruchamialne lokalnie
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### C<span style="text-transform: lowercase;">ontinuous deployment</span>

- Działający ci/cd jest najwyższym priorytetem!
					</script>
				</section>

				<!-- section data-markdown>
					<script type="text/template">
### N<span style="text-transform: lowercase;">arzędzia</span>

- docker-compose
- [localstack](https://github.com/localstack/localstack)
					</script>
				</section -->

				<section data-markdown>
					<script type="text/template">
### L<span style="text-transform: lowercase;">ogowanie do </span>VM

1. Zawsze ssh z kluczami
2. Przez bastion
3. [AWS Systems Manager Session Manager](https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager.html) / [AWS EC2 Instance Connect](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Connect-using-EC2-Instance-Connect.html) lub alternatywa
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### <span style="text-transform: lowercase;">ssh z kluczen rsa</span>

1. Tworzymy parę: prywatny i publiczny klucz

```bash
# wygenerowany klucz znajdzie się
# w ~/.ssh/id_rsa
ssh-keygen -t rsa -b 4096 -C "wbjt@wsb.wroclaw.pl"

# jeśli chcemy mieć więcej niż jeden klucz
ssh-keygen -t rsa -b 4096 -C "wbjt@wsb.wroclaw.pl" \
        -f id_rsa_wsb
```
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### <span style="text-transform: lowercase;">ssh z kluczem rsa</span>

- Publiczny `id_rsa.pub` umieszczamy na serwerze
- Prywatny `id_rsa` chronimy jak oka w głowie
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### <span style="text-transform: lowercase;">ssh z kluczem rsa</span>

2. Przegląd

   ```
   ls ~/.ssh
   id_rsa # nigdy nie dzielimy z nikim
   id_rsa.pub
   ```

3. Debugowanie:

   ```bash
   ssh -vv github.com
   ```
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### <span style="text-transform: lowercase;">ssh z kluczem rsa</span>

Ćwiczenie:<br />
używanie klucza ssh do pracy z repozytorium github [instrukcja](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent).
					</script>
				</section>

				<section data-markdown>
						<script type="text/template">
### J<span style="text-transform: lowercase;">ak wybrać X?</span>

1. warto mieć [ADR](https://adr.github.io/) lub inną lekką formę dokumentacji decyzji
2. osobne konto na eksperymenty dla teamu
						</script>
				</section>

				<section data-markdown>
						<script type="text/template">
### J<span style="text-transform: lowercase;">ak wybrać X?</span>

- warto mieć [ADR](https://adr.github.io/) lub inną lekką formę dokumentacji decyzji
						</script>
				</section>

				<section data-markdown>
						<script type="text/template">
### J<span style="text-transform: lowercase;">ak wybrać region</span>

- Apekty prawne
- Gdzie jest mój klient? (latency)
- Cena i dostępność usług
						</script>
				</section>

				<section data-markdown>
						<script type="text/template">
### J<span style="text-transform: lowercase;">ak wybrać VM</span>

- Cena
- Wymagania aplikacji
- [VM types](https://acloudguru.com/blog/engineering/cloud-comparison-aws-ec2-vs-azure-virtual-machines-vs-google-compute-engine)
						</script>
				</section>

				<section>
					<h4>D<span style="text-transform: lowercase;">ziękuje za uwagę</span></h4>
					<img src="img/laptop_book_accelarate.png" width="80%">
				</section>


				<section data-markdown>
					<script type="text/template">
				## B<span style="text-transform: lowercase;">ackup slides</span>

					</script>
				</section>

				<section data-markdown>
						<script type="text/template">
# A<span style="text-transform: lowercase;">zure Batch</span>

					</script>
				</section>

				<section data-markdown>
						<script type="text/template">
### A<span style="text-transform: lowercase;">zure Batch</span>

Zestaw narzędzi wiersza poleceń Azure CLI udostępnia polecenie az batch do pracy z usługą Azure Batch.
Pozwala ono na zarządzanie kontem, pulami węzłów oraz zadaniami.

						</script>
				</section>


				<section data-markdown>
						<script type="text/template">
### A<span style="text-transform: lowercase;">zure Batch</span>

```bash
az batch account create \
  --resource-group <nazwa-grupy-zasobów> \
  --name <nazwa-konta> \
  --location <region>
```
						</script>
				</section>

				<section data-markdown>
						<script type="text/template">
### A<span style="text-transform: lowercase;">zure Batch</span>

```bash
az batch account login \
  --resource-group <nazwa-grupy-zasobów> \
  --name <nazwa-konta> \
  --shared-key-auth
```
						</script>
				</section>


				<section data-markdown>
						<script type="text/template">
### A<span style="text-transform: lowercase;">zure Batch</span>

```bash
az batch pool create \
  --id <id-puli> \
  --vm-size <rozmiar-węzła > \
  --target-dedicated-nodes <liczba-węzłów> \
  --image <obraz-maszyny> \
  --node-agent-sku-id "batch.node.ubuntu 18.04"
```
						</script>
				</section>

				<section data-markdown>
						<script type="text/template">
### A<span style="text-transform: lowercase;">zure Batch</span>

```bash
az batch task create \
  --task-id <id-zadania> \
  --job-id <id-zadania-nadrzędnego> \
  --command-line <zdanie-do-wykonania>
```
						</script>
				</section>

				<!-- section data-markdown>
					<script type="text/template">
### T<span style="text-transform: lowercase;">erraform</span>

- Infra-as-a-Code
					</script>
				</section -->

				<!-- section data-markdown>
					<script type="text/template">
### T<span style="text-transform: lowercase;">erraform</span>

					</script>
				</section -->


			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
